generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String
}

model Docente {
  id             Int          @id @default(autoincrement())
  nombre         String
  email          String       @unique
  especialidadId Int
  carreraId      Int
  carrera        Carrera      @relation(fields: [carreraId], references: [id])
  especialidad   Especialidad @relation(fields: [especialidadId], references: [id])
  materias       Materia[]
}

model Materia {
  id          Int          @id @default(autoincrement())
  nombre      String
  codigo      String       @unique
  docenteId   Int
  carreraId   Int
  carrera     Carrera      @relation(fields: [carreraId], references: [id])
  docente     Docente      @relation(fields: [docenteId], references: [id])
  estudiantes Estudiante[] @relation("Inscripciones")
}

model Carrera {
  id          Int          @id @default(autoincrement())
  nombre      String       @unique
  docentes    Docente[]
  estudiantes Estudiante[]
  materias    Materia[]
}

model Estudiante {
  id        Int       @id @default(autoincrement())
  nombre    String
  email     String    @unique
  carreraId Int
  cicloId   Int
  carrera   Carrera   @relation(fields: [carreraId], references: [id])
  ciclo     Ciclo     @relation(fields: [cicloId], references: [id])
  materias  Materia[] @relation("Inscripciones")
}

model Ciclo {
  id          Int          @id @default(autoincrement())
  numero      Int
  estudiantes Estudiante[]
}

model Especialidad {
  id       Int       @id @default(autoincrement())
  nombre   String
  docentes Docente[]
}
