generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id        Int     @id @default(autoincrement())
  email     String  @unique
  password  String
}

model Docente {
  id            Int       @id @default(autoincrement())
  nombre        String
  email         String    @unique
  especialidad  Especialidad @relation(fields: [especialidadId], references: [id])
  especialidadId Int
  carrera       Carrera   @relation(fields: [carreraId], references: [id])
  carreraId     Int
  materias      Materia[]
}

model Materia {
  id        Int       @id @default(autoincrement())
  nombre    String
  codigo    String    @unique
  docente   Docente   @relation(fields: [docenteId], references: [id])
  docenteId Int
  carrera   Carrera   @relation(fields: [carreraId], references: [id])
  carreraId Int
  estudiantes Estudiante[] @relation("Inscripciones")
}

model Carrera {
  id         Int        @id @default(autoincrement())
  nombre     String     @unique
  docentes   Docente[]
  materias   Materia[]
  estudiantes Estudiante[]
}

model Estudiante {
  id        Int     @id @default(autoincrement())
  nombre    String
  email     String  @unique
  carrera   Carrera @relation(fields: [carreraId], references: [id])
  carreraId Int
  ciclo     Ciclo   @relation(fields: [cicloId], references: [id])
  cicloId   Int
  materias  Materia[] @relation("Inscripciones")
}

model Ciclo {
  id         Int          @id @default(autoincrement())
  numero     Int
  estudiantes Estudiante[]
}

model Especialidad {
  id       Int       @id @default(autoincrement())
  nombre   String
  docentes Docente[]
}
